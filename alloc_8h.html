<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ah_base/include/ah/alloc.h File Reference - Eclipse Arrowhead™ Core C Libraries</title>
  <script src="jquery.js"></script>
  <script src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script>
      window.addEventListener("load", () => {
          let contents = document.querySelector("body > div.contents");
          if (!contents) {
            return;
          }
          document.querySelectorAll("#top ul > li.current > a > span").forEach((selectedMenuItem) => {
            contents.classList.add(selectedMenuItem.innerText.trim().toLowerCase().replace(/\s+/, "-"));
          });
        for (let i = contents.childNodes.length - 1; i >= 0; i -= 1) {
          let childNode = contents.childNodes.item(i);
          if ((childNode.nodeType === 3 && childNode.textContent.trim().length === 0)
                  || (childNode.nodeType === 1 && childNode.classList.contains("textblock") && childNode.textContent.trim().length === 0)) {
            childNode.remove();
          }
        }
      });
  </script>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="DoxygenStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top">
  <header>
    <img alt="Logo" src="arrowhead-logo-white.svg"/>
    <h1>Eclipse Arrowhead™ Core C Libraries <span class="version"></span></h1>
  </header>
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="files.html"><span>Headers</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e181be20417508ccbaf60a7ad88b28e5.html">ah_base</a></li><li class="navelem"><a class="el" href="dir_4e09807cd623eda32c4b1ef4b2b976fd.html">include</a></li><li class="navelem"><a class="el" href="dir_d9de5a19e148cb2028fab693738defa4.html">ah</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">alloc.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Dynamic memory allocation. </p>
<p >This file most significantly provides function for allocating and freeing dynamic memory. If provides the malloc(), calloc(), realloc() and free() functions of the C99 standard library, or your own implementations of them, as well as functions for allocating and freeing <em>pages</em> of memory. A <em>page</em> is a contiguous chunk of <code>AH_PSIZE</code> bytes, aligned to a memory boundary deemed suitable by the library implementation.</p>
<p >In contrast to the C99 allocator, the page allocator is relatively simple to implement such that it effectively avoids memory fragmentation. As all pages are of the same size, those pages can be allocated and freed relatively fast. The page allocator is used, when possible, by the Arrowhead Core C libraries.</p>
<dl class="section note"><dt>Note</dt><dd>What functions are concretely provided can be configured as described in <a class="el" href="conf_8h.html" title="Library configuration.">conf.h</a>. </dd></dl>
</div>
<p><a href="alloc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af60bc3ffcf5977b5603888f9c70cc74a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#af60bc3ffcf5977b5603888f9c70cc74a">ah_calloc</a>(n,  size)&#160;&#160;&#160;<a class="el" href="conf_8h.html#a19996360d443048866c0046ebc5cdcc3">AH_CONF_CALLOC</a>((n), (size))</td></tr>
<tr class="memdesc:af60bc3ffcf5977b5603888f9c70cc74a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates and zeroes an array of <em>n</em> elements, each being <em>size</em> bytes large.  <a href="alloc_8h.html#af60bc3ffcf5977b5603888f9c70cc74a">More...</a><br /></td></tr>
<tr class="separator:af60bc3ffcf5977b5603888f9c70cc74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b2cc0476e2976f7a3ca4e8f23a1938"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#a28b2cc0476e2976f7a3ca4e8f23a1938">ah_free</a>(ptr)&#160;&#160;&#160;<a class="el" href="conf_8h.html#a3ad23dbb366fc5b79aa143d2e2618f58">AH_CONF_FREE</a>((ptr))</td></tr>
<tr class="memdesc:a28b2cc0476e2976f7a3ca4e8f23a1938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases referenced memory block, potentially making it possible for the allocator to use it again.  <a href="alloc_8h.html#a28b2cc0476e2976f7a3ca4e8f23a1938">More...</a><br /></td></tr>
<tr class="separator:a28b2cc0476e2976f7a3ca4e8f23a1938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a026109a0711522c5144ecd324d1e64ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#a026109a0711522c5144ecd324d1e64ff">ah_malloc</a>(size)&#160;&#160;&#160;<a class="el" href="conf_8h.html#ac2d062d4332ea48573da34ee776e85a9">AH_CONF_MALLOC</a>((size))</td></tr>
<tr class="memdesc:a026109a0711522c5144ecd324d1e64ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a contiguous chunk of at least <em>size</em> bytes of memory.  <a href="alloc_8h.html#a026109a0711522c5144ecd324d1e64ff">More...</a><br /></td></tr>
<tr class="separator:a026109a0711522c5144ecd324d1e64ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911d4e66ad39e4007ef01aec5a0ec06a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#a911d4e66ad39e4007ef01aec5a0ec06a">ah_palloc</a>()&#160;&#160;&#160;<a class="el" href="conf_8h.html#ae4da26828f60519b05deb87631ad4a3f">AH_CONF_PALLOC</a>()</td></tr>
<tr class="memdesc:a911d4e66ad39e4007ef01aec5a0ec06a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a <em>page</em> of memory, guaranteed to be at least <code>AH_PSIZE</code> bytes large.  <a href="alloc_8h.html#a911d4e66ad39e4007ef01aec5a0ec06a">More...</a><br /></td></tr>
<tr class="separator:a911d4e66ad39e4007ef01aec5a0ec06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d6cccf58f7975d91679bbfbdf702c6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#a8d6cccf58f7975d91679bbfbdf702c6d">ah_pfree</a>(page)&#160;&#160;&#160;<a class="el" href="conf_8h.html#a99b32d7175d0b45a601f2b0063964ce2">AH_CONF_PFREE</a>((page))</td></tr>
<tr class="memdesc:a8d6cccf58f7975d91679bbfbdf702c6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases referenced memory page, potentially making it possible for the page allocator to use it again.  <a href="alloc_8h.html#a8d6cccf58f7975d91679bbfbdf702c6d">More...</a><br /></td></tr>
<tr class="separator:a8d6cccf58f7975d91679bbfbdf702c6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf3a4492f083f0f4868f515f16441070"><td class="memItemLeft" align="right" valign="top"><a id="acf3a4492f083f0f4868f515f16441070" name="acf3a4492f083f0f4868f515f16441070"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_PSIZE</b>&#160;&#160;&#160;<a class="el" href="conf_8h.html#a635d29d236e1757dfedb399a64ef3576">AH_CONF_PSIZE</a></td></tr>
<tr class="memdesc:acf3a4492f083f0f4868f515f16441070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size, in bytes, of the memory pages returned by <a class="el" href="alloc_8h.html#a911d4e66ad39e4007ef01aec5a0ec06a" title="Allocates a page of memory, guaranteed to be at least AH_PSIZE bytes large.">ah_palloc()</a>. <br /></td></tr>
<tr class="separator:acf3a4492f083f0f4868f515f16441070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2648214e0896916bc9c91ff914b5adea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alloc_8h.html#a2648214e0896916bc9c91ff914b5adea">ah_realloc</a>(ptr,  size)&#160;&#160;&#160;<a class="el" href="conf_8h.html#a6c8d793c98954aa8e1bf5894196f8c84">AH_CONF_REALLOC</a>((ptr), (size))</td></tr>
<tr class="memdesc:a2648214e0896916bc9c91ff914b5adea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reallocates memory chunk associated with <em>ptr</em>.  <a href="alloc_8h.html#a2648214e0896916bc9c91ff914b5adea">More...</a><br /></td></tr>
<tr class="separator:a2648214e0896916bc9c91ff914b5adea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af60bc3ffcf5977b5603888f9c70cc74a" name="af60bc3ffcf5977b5603888f9c70cc74a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af60bc3ffcf5977b5603888f9c70cc74a">&#9670;&#160;</a></span>ah_calloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_calloc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#a19996360d443048866c0046ebc5cdcc3">AH_CONF_CALLOC</a>((n), (size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates and zeroes an array of <em>n</em> elements, each being <em>size</em> bytes large. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Number of elements to allocate. </td></tr>
    <tr><td class="paramname">size</td><td>Size, in bytes, of each element. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A zeroed chunk of memory, or <code>NULL</code> if no sufficiently large chunk can be allocated. </dd></dl>

</div>
</div>
<a id="a28b2cc0476e2976f7a3ca4e8f23a1938" name="a28b2cc0476e2976f7a3ca4e8f23a1938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b2cc0476e2976f7a3ca4e8f23a1938">&#9670;&#160;</a></span>ah_free</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_free</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#a3ad23dbb366fc5b79aa143d2e2618f58">AH_CONF_FREE</a>((ptr))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases referenced memory block, potentially making it possible for the allocator to use it again. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer previously acquired from <a class="el" href="alloc_8h.html#af60bc3ffcf5977b5603888f9c70cc74a" title="Allocates and zeroes an array of n elements, each being size bytes large.">ah_calloc()</a>, <a class="el" href="alloc_8h.html#a026109a0711522c5144ecd324d1e64ff" title="Allocates a contiguous chunk of at least size bytes of memory.">ah_malloc()</a> or <a class="el" href="alloc_8h.html#a2648214e0896916bc9c91ff914b5adea" title="Reallocates memory chunk associated with ptr.">ah_realloc()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>It is an error to provide a pointer returned by <a class="el" href="alloc_8h.html#a911d4e66ad39e4007ef01aec5a0ec06a" title="Allocates a page of memory, guaranteed to be at least AH_PSIZE bytes large.">ah_palloc()</a>, or any other allocation function, to this function. </dd></dl>

</div>
</div>
<a id="a026109a0711522c5144ecd324d1e64ff" name="a026109a0711522c5144ecd324d1e64ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a026109a0711522c5144ecd324d1e64ff">&#9670;&#160;</a></span>ah_malloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_malloc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#ac2d062d4332ea48573da34ee776e85a9">AH_CONF_MALLOC</a>((size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a contiguous chunk of at least <em>size</em> bytes of memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size, in bytes, of chunk to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An uninitialized chunk of memory, or <code>NULL</code> if no sufficiently large chunk can be allocated. </dd></dl>

</div>
</div>
<a id="a911d4e66ad39e4007ef01aec5a0ec06a" name="a911d4e66ad39e4007ef01aec5a0ec06a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911d4e66ad39e4007ef01aec5a0ec06a">&#9670;&#160;</a></span>ah_palloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_palloc</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#ae4da26828f60519b05deb87631ad4a3f">AH_CONF_PALLOC</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a <em>page</em> of memory, guaranteed to be at least <code>AH_PSIZE</code> bytes large. </p>
<p >The value of <code>AH_PSIZE</code> can be adjusted by modifying <code>AH_CONF_PSIZE</code>, more of which you can read in <a class="el" href="conf_8h.html" title="Library configuration.">conf.h</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>An uninitialized chunk of memory, or <code>NULL</code> if no sufficiently large chunk can be allocated. </dd></dl>

</div>
</div>
<a id="a8d6cccf58f7975d91679bbfbdf702c6d" name="a8d6cccf58f7975d91679bbfbdf702c6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d6cccf58f7975d91679bbfbdf702c6d">&#9670;&#160;</a></span>ah_pfree</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_pfree</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">page</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#a99b32d7175d0b45a601f2b0063964ce2">AH_CONF_PFREE</a>((page))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases referenced memory page, potentially making it possible for the page allocator to use it again. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Pointer previously acquired from <a class="el" href="alloc_8h.html#a911d4e66ad39e4007ef01aec5a0ec06a" title="Allocates a page of memory, guaranteed to be at least AH_PSIZE bytes large.">ah_palloc()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>It is an error to provide a pointer returned by <a class="el" href="alloc_8h.html#af60bc3ffcf5977b5603888f9c70cc74a" title="Allocates and zeroes an array of n elements, each being size bytes large.">ah_calloc()</a>, <a class="el" href="alloc_8h.html#a026109a0711522c5144ecd324d1e64ff" title="Allocates a contiguous chunk of at least size bytes of memory.">ah_malloc()</a> or any other allocation function, to this function. </dd></dl>

</div>
</div>
<a id="a2648214e0896916bc9c91ff914b5adea" name="a2648214e0896916bc9c91ff914b5adea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2648214e0896916bc9c91ff914b5adea">&#9670;&#160;</a></span>ah_realloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ah_realloc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="conf_8h.html#a6c8d793c98954aa8e1bf5894196f8c84">AH_CONF_REALLOC</a>((ptr), (size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reallocates memory chunk associated with <em>ptr</em>. </p>
<p >Conceptually, this function allocates a new memory chunk of <em>size</em> bytes, copies over the contents of the <em>ptr</em> buffer (or as much of it as fits in the new chunk), and then frees the memory associated with <em>ptr</em>. If <em>size</em> is larger than the previous size of the <em>ptr</em> chunk, the additional memory is uninitialized. Practically, this function may expand or contract the <em>ptr</em> chunk in place, or do something else with the same observable result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer previously acquired from <a class="el" href="alloc_8h.html#af60bc3ffcf5977b5603888f9c70cc74a" title="Allocates and zeroes an array of n elements, each being size bytes large.">ah_calloc()</a>, <a class="el" href="alloc_8h.html#a026109a0711522c5144ecd324d1e64ff" title="Allocates a contiguous chunk of at least size bytes of memory.">ah_malloc()</a> or <a class="el" href="alloc_8h.html#a2648214e0896916bc9c91ff914b5adea" title="Reallocates memory chunk associated with ptr.">ah_realloc()</a>. </td></tr>
    <tr><td class="paramname">size</td><td>Desired size, in bytes, of chunk after reallocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A chunk of memory of at least <em>size</em> bytes that contain the contents previously associated with <em>ptr</em>. <code>NULL</code> if the reallocation failed, in which case the chunk of <em>ptr</em> remains unmodified.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If <em>size</em> is <code>0</code> and <em>ptr</em> is not <code>NULL</code>, the result <em>may</em> be a pointer to a new buffer with size <em>0</em> being returned or <code>NULL</code> being returned. </dd></dl>

</div>
</div>
</div><!-- contents -->
  <footer>Generated by <a href="https://doxygen.org">Doxygen</a> 1.9.5</footer>
</body>
</html>
