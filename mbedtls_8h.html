<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ah_mbedtls/include/ah/mbedtls.h File Reference - Eclipse Arrowhead™ Core C Libraries</title>
  <script src="jquery.js"></script>
  <script src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script>
      window.addEventListener("load", () => {
          let contents = document.querySelector("body > div.contents");
          if (!contents) {
            return;
          }
          document.querySelectorAll("#top ul > li.current > a > span").forEach((selectedMenuItem) => {
            contents.classList.add(selectedMenuItem.innerText.trim().toLowerCase().replace(/\s+/, "-"));
          });
        for (let i = contents.childNodes.length - 1; i >= 0; i -= 1) {
          let childNode = contents.childNodes.item(i);
          if ((childNode.nodeType === 3 && childNode.textContent.trim().length === 0)
                  || (childNode.nodeType === 1 && childNode.classList.contains("textblock") && childNode.textContent.trim().length === 0)) {
            childNode.remove();
          }
        }
      });
  </script>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="DoxygenStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top">
  <header>
    <img alt="Logo" src="arrowhead-logo-white.svg"/>
    <h1>Eclipse Arrowhead™ Core C Libraries <span class="version"></span></h1>
  </header>
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="files.html"><span>Headers</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b7fcc25d92ffb57a40f725487fb069f2.html">ah_mbedtls</a></li><li class="navelem"><a class="el" href="dir_e66556b2fd9786a5624a5d38b20563e0.html">include</a></li><li class="navelem"><a class="el" href="dir_408cf3532aa5231bc1695596bccd693c.html">ah</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">mbedtls.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Transport Layer Security (TLS) via MbedTLS. </p>
<p >Here, structures and functions are provided for associating TLS clients and servers with <a class="el" href="structah__tcp__trans.html" title="TCP-based transport.">ah_tcp_trans</a> instances. These transport instances may then be used to make <a class="el" href="structah__tcp__conn.html" title="TCP connection handle.">ah_tcp_conn</a> and <a class="el" href="structah__tcp__listener.html" title="TCP listener handle.">ah_tcp_listener</a> instances communicate using the TLS protocol. TLS clients are used as transports when initializing local TCP connections, while TLS servers are used as transports when initializing local TCP listeners. Below, we provide brief instructions for initializing and using clients and servers, respectively.</p>
<h3>Clients</h3>
<p >TLS clients are initialized using <a class="el" href="mbedtls_8h.html#a160a749461dad6634ea816c9325ef63f" title="Initializes cln for subsequent use.">ah_mbedtls_client_init()</a>. That function takes an mbedtls_ssl_config instance as argument, which you must prepare by setting its <em>endpoint</em> to <em>client mode</em> and by providing other relevant configuration details. Setting the endpoint of the MbedTLS configuration can be performed using the mbedtls_ssl_config_defaults() function. For more details about how to set up an MbedTLS configuration objects, please refer to the <a href="https://tls.mbed.org">MbedTLS</a> documentation.</p>
<p >Once you have a properly initialized <a class="el" href="structah__mbedtls__client.html" title="MbedTLS client context.">ah_mbedtls_client</a> instance, you can get its associated TCP transport by calling <a class="el" href="mbedtls_8h.html#afdcc0f49d9296e48678a91db5885df89" title="Gets copy of TCP transport associated with cln.">ah_mbedtls_client_as_tcp_trans()</a>. That transport can be used to initialize a TCP connection by calling <a class="el" href="tcp_8h.html#a955ebbd02d1289b8320f674c10df6ad0" title="Initializes conn for subsequent use.">ah_tcp_conn_init()</a>.</p>
<p >When using a TLS transport with a TCP connection, its callbacks may be invoked with one additional error code: <a class="el" href="err_8h.html#a1600ea0451fe4cb58ca302e8c9c443ae">AH_EDEP</a>. That error code indicates that you must use <a class="el" href="mbedtls_8h.html#ae29491b17064971066bc6858ccf21ea8" title="Gets last MbedTLS error code saved by cln.">ah_mbedtls_client_get_last_err()</a> to get the last error code produced by MbedTLS. It is up to you to handle these errors as you see fit.</p>
<p >Every initialized <a class="el" href="structah__mbedtls__client.html" title="MbedTLS client context.">ah_mbedtls_client</a> instance must also be terminated once no longer in use, which you can do by calling <a class="el" href="mbedtls_8h.html#ac71b8e3239612a03821e61f3deeff0bb" title="Terminates cln, releasing any resources it may hold.">ah_mbedtls_client_term()</a>. Note that that function will not terminate the MbedTLS configuration. An appropriate place to terminate both clients and configurations is likely often going to be the <a class="el" href="structah__tcp__conn__cbs.html#a3a40aac8c559757a3fb0d819cf6d1f75" title="conn has been closed.">ah_tcp_conn_cbs::on_close</a> callback of the TCP connection you provide the MbedTLS client transport to.</p>
<h3>Servers</h3>
<p >TLS servers are initialized, used and terminated in the same manner as TLS clients. The names of the functions we provide here are the same as those for TLS clients, with the difference that the server functions are prefixed with <code>ah_mbedtls_server_</code>. You must, however, make sure that the MbedTLS configurations you produce have their <em>endpoints</em> set to <em>server mode</em>.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://rfc-editor.org/rfc/rfc8446">https://rfc-editor.org/rfc/rfc8446</a> </dd>
<dd>
<a href="https://rfc-editor.org/rfc/rfc5246">https://rfc-editor.org/rfc/rfc5246</a> </dd>
<dd>
<a href="https://tls.mbed.org/">https://tls.mbed.org/</a> </dd></dl>
</div>
<p><a href="mbedtls_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">MbedTLS client context.  <a href="structah__mbedtls__client.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">MbedTLS server context.  <a href="structah__mbedtls__server.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae4d51d234e1538f48573f6e8567185ac"><td class="memItemLeft" align="right" valign="top"><a id="ae4d51d234e1538f48573f6e8567185ac" name="ae4d51d234e1538f48573f6e8567185ac"></a>
typedef struct <a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ah_mbedtls_client_t</b></td></tr>
<tr class="separator:ae4d51d234e1538f48573f6e8567185ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20845064a448d8ac82dc4f5c70f5c048"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">ah_mbedtls_on_handshake_done_cb</a>) (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln, const mbedtls_x509_crt *peer_chain, <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> err)</td></tr>
<tr class="memdesc:a20845064a448d8ac82dc4f5c70f5c048"><td class="mdescLeft">&#160;</td><td class="mdescRight"><em>cln</em> has been part of a completed TLS handshake.  <a href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">More...</a><br /></td></tr>
<tr class="separator:a20845064a448d8ac82dc4f5c70f5c048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71c048e11d23ae810df249715e14d56"><td class="memItemLeft" align="right" valign="top"><a id="af71c048e11d23ae810df249715e14d56" name="af71c048e11d23ae810df249715e14d56"></a>
typedef struct <a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ah_mbedtls_server_t</b></td></tr>
<tr class="separator:af71c048e11d23ae810df249715e14d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">TLS Client</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >Operations on <a class="el" href="structah__mbedtls__client.html" title="MbedTLS client context.">ah_mbedtls_client</a> instances.</p>
<p >All such instances must be initialized using <a class="el" href="mbedtls_8h.html#a160a749461dad6634ea816c9325ef63f" title="Initializes cln for subsequent use.">ah_mbedtls_client_init()</a> before they are provided to any other functions listed here. Any other requirements regarding the state of clients are described in the documentation of each respective function, sometimes only via the error codes it lists. </p>
</div></td></tr>
<tr class="memitem:afdcc0f49d9296e48678a91db5885df89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#afdcc0f49d9296e48678a91db5885df89">ah_mbedtls_client_as_tcp_trans</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln)</td></tr>
<tr class="memdesc:afdcc0f49d9296e48678a91db5885df89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets copy of TCP transport associated with <em>cln</em>.  <a href="mbedtls_8h.html#afdcc0f49d9296e48678a91db5885df89">More...</a><br /></td></tr>
<tr class="separator:afdcc0f49d9296e48678a91db5885df89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29491b17064971066bc6858ccf21ea8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ae29491b17064971066bc6858ccf21ea8">ah_mbedtls_client_get_last_err</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln)</td></tr>
<tr class="memdesc:ae29491b17064971066bc6858ccf21ea8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets last MbedTLS error code saved by <em>cln</em>.  <a href="mbedtls_8h.html#ae29491b17064971066bc6858ccf21ea8">More...</a><br /></td></tr>
<tr class="separator:ae29491b17064971066bc6858ccf21ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e9f20c74bb183e360bbef598b9e89b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> mbedtls_ssl_context *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#a0e9f20c74bb183e360bbef598b9e89b5">ah_mbedtls_client_get_ssl_context</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln)</td></tr>
<tr class="memdesc:a0e9f20c74bb183e360bbef598b9e89b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets TLS/SSL context associated with <em>cln</em>.  <a href="mbedtls_8h.html#a0e9f20c74bb183e360bbef598b9e89b5">More...</a><br /></td></tr>
<tr class="separator:a0e9f20c74bb183e360bbef598b9e89b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae200349c5888a2a4c9d92d2f95e1078b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__conn.html">ah_tcp_conn_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ae200349c5888a2a4c9d92d2f95e1078b">ah_mbedtls_client_get_tcp_conn</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln)</td></tr>
<tr class="memdesc:ae200349c5888a2a4c9d92d2f95e1078b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets pointer to TCP connection associated with <em>cln</em>.  <a href="mbedtls_8h.html#ae200349c5888a2a4c9d92d2f95e1078b">More...</a><br /></td></tr>
<tr class="separator:ae200349c5888a2a4c9d92d2f95e1078b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a160a749461dad6634ea816c9325ef63f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#a160a749461dad6634ea816c9325ef63f">ah_mbedtls_client_init</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln, <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a> trans, mbedtls_ssl_config *ssl_conf, <a class="el" href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">ah_mbedtls_on_handshake_done_cb</a> on_handshake_done_cb)</td></tr>
<tr class="memdesc:a160a749461dad6634ea816c9325ef63f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <em>cln</em> for subsequent use.  <a href="mbedtls_8h.html#a160a749461dad6634ea816c9325ef63f">More...</a><br /></td></tr>
<tr class="separator:a160a749461dad6634ea816c9325ef63f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71b8e3239612a03821e61f3deeff0bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ac71b8e3239612a03821e61f3deeff0bb">ah_mbedtls_client_term</a> (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln)</td></tr>
<tr class="memdesc:ac71b8e3239612a03821e61f3deeff0bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates <em>cln</em>, releasing any resources it may hold.  <a href="mbedtls_8h.html#ac71b8e3239612a03821e61f3deeff0bb">More...</a><br /></td></tr>
<tr class="separator:ac71b8e3239612a03821e61f3deeff0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">TLS Server</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >Operations on <a class="el" href="structah__mbedtls__server.html" title="MbedTLS server context.">ah_mbedtls_server</a> instances.</p>
<p >All such instances must be initialized using <a class="el" href="mbedtls_8h.html#ab69d6d0ed557dcaf9a6080fc6be44b08" title="Initializes srv for subsequent use.">ah_mbedtls_server_init()</a> before they are provided to any other functions listed here. Any other requirements regarding the state of servers are described in the documentation of each respective function, sometimes only via the error codes it lists. </p>
</div></td></tr>
<tr class="memitem:ac1761bf2d966f1995f6dd5cddc7c69c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ac1761bf2d966f1995f6dd5cddc7c69c9">ah_mbedtls_server_as_tcp_trans</a> (<a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *srv)</td></tr>
<tr class="memdesc:ac1761bf2d966f1995f6dd5cddc7c69c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets copy of TCP transport associated with <em>srv</em>.  <a href="mbedtls_8h.html#ac1761bf2d966f1995f6dd5cddc7c69c9">More...</a><br /></td></tr>
<tr class="separator:ac1761bf2d966f1995f6dd5cddc7c69c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab69d6d0ed557dcaf9a6080fc6be44b08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ab69d6d0ed557dcaf9a6080fc6be44b08">ah_mbedtls_server_init</a> (<a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *srv, <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a> trans, mbedtls_ssl_config *ssl_conf, <a class="el" href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">ah_mbedtls_on_handshake_done_cb</a> on_handshake_done_cb)</td></tr>
<tr class="memdesc:ab69d6d0ed557dcaf9a6080fc6be44b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <em>srv</em> for subsequent use.  <a href="mbedtls_8h.html#ab69d6d0ed557dcaf9a6080fc6be44b08">More...</a><br /></td></tr>
<tr class="separator:ab69d6d0ed557dcaf9a6080fc6be44b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607401acb7db41d616d47ed5bf5e24b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#a607401acb7db41d616d47ed5bf5e24b3">ah_mbedtls_server_term</a> (<a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *srv)</td></tr>
<tr class="memdesc:a607401acb7db41d616d47ed5bf5e24b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates <em>srv</em>, releasing any resources it may hold.  <a href="mbedtls_8h.html#a607401acb7db41d616d47ed5bf5e24b3">More...</a><br /></td></tr>
<tr class="separator:a607401acb7db41d616d47ed5bf5e24b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">MbedTLS Library Version Details</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >Version information about <em>this</em> library, and <em>not</em> about the version of MbedTLS it is currently using. </p>
</div></td></tr>
<tr class="memitem:aef5730ce3b87f5ae145d8c4102ed0f10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#aef5730ce3b87f5ae145d8c4102ed0f10">ah_mbedtls_lib_version_major</a> (void)</td></tr>
<tr class="memdesc:aef5730ce3b87f5ae145d8c4102ed0f10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets major version of this MbedTLS library.  <a href="mbedtls_8h.html#aef5730ce3b87f5ae145d8c4102ed0f10">More...</a><br /></td></tr>
<tr class="separator:aef5730ce3b87f5ae145d8c4102ed0f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9bb0a936d653d1d916f5b2a7185b0ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ad9bb0a936d653d1d916f5b2a7185b0ad">ah_mbedtls_lib_version_minor</a> (void)</td></tr>
<tr class="memdesc:ad9bb0a936d653d1d916f5b2a7185b0ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets minor version of this MbedTLS library.  <a href="mbedtls_8h.html#ad9bb0a936d653d1d916f5b2a7185b0ad">More...</a><br /></td></tr>
<tr class="separator:ad9bb0a936d653d1d916f5b2a7185b0ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac010008b65bc89d8df33cc0013c08863"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#ac010008b65bc89d8df33cc0013c08863">ah_mbedtls_lib_version_patch</a> (void)</td></tr>
<tr class="memdesc:ac010008b65bc89d8df33cc0013c08863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets patch version of this MbedTLS library.  <a href="mbedtls_8h.html#ac010008b65bc89d8df33cc0013c08863">More...</a><br /></td></tr>
<tr class="separator:ac010008b65bc89d8df33cc0013c08863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b19e66b4019e7bc7ba737b44492726"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbedtls_8h.html#a47b19e66b4019e7bc7ba737b44492726">ah_mbedtls_lib_version_str</a> (void)</td></tr>
<tr class="memdesc:a47b19e66b4019e7bc7ba737b44492726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets human-readable representation of version of this MbedTLS library.  <a href="mbedtls_8h.html#a47b19e66b4019e7bc7ba737b44492726">More...</a><br /></td></tr>
<tr class="separator:a47b19e66b4019e7bc7ba737b44492726"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a20845064a448d8ac82dc4f5c70f5c048" name="a20845064a448d8ac82dc4f5c70f5c048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20845064a448d8ac82dc4f5c70f5c048">&#9670;&#160;</a></span>ah_mbedtls_on_handshake_done_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ah_mbedtls_on_handshake_done_cb) (<a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *cln, const mbedtls_x509_crt *peer_chain, <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> err)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><em>cln</em> has been part of a completed TLS handshake. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client associated with the connection through which the TLS handshake was performed. </td></tr>
    <tr><td class="paramname">peer_chain</td><td>Pointer to the certificate chain of the remote host, if <em>err</em> is <a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> and MbedTLS is compiled with <code>MBEDTLS_X509_CRT_PARSE_C</code> enabled. <code>NULL</code> is returned in any other case. </td></tr>
    <tr><td class="paramname">err</td><td>One of the following error codes may always be given: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - Handshake concluded with a usable TLS session. </li>
<li>
<a class="el" href="err_8h.html#a1600ea0451fe4cb58ca302e8c9c443ae">AH_EDEP</a> - An MbedTLS error occurred that cannot be represented with an Arrowhead Core C error code. Use the <a class="el" href="mbedtls_8h.html#ae29491b17064971066bc6858ccf21ea8" title="Gets last MbedTLS error code saved by cln.">ah_mbedtls_client_get_last_err()</a> function with <em>cln</em> as argument to get a copy of the MbedTLS error. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> - Not enough heap memory available. </li>
</ul>
What other error codes are possible depend on the underlying TCP transport used by the handshaking TLS client. See <a class="el" href="structah__tcp__conn__cbs.html#a8e102f250e05480f145fb166d398e4ee" title="conn has received data from its associated remote host.">ah_tcp_conn_cbs::on_read</a> and <a class="el" href="structah__tcp__conn__cbs.html#a8272e524f9d4e421f185ed68f034f611" title="conn has sent data to its associated remote host.">ah_tcp_conn_cbs::on_write</a> for lists of error codes that may be provided if the default TCP transport is used, directly or indirectly, by the TLS client.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To access the TLS client associated with <em>cln</em>, use the ah_mbedtls_conn_get_client() function. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afdcc0f49d9296e48678a91db5885df89" name="afdcc0f49d9296e48678a91db5885df89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdcc0f49d9296e48678a91db5885df89">&#9670;&#160;</a></span>ah_mbedtls_client_as_tcp_trans()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a> ah_mbedtls_client_as_tcp_trans </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets copy of TCP transport associated with <em>cln</em>. </p>
<p >The <a class="el" href="structah__tcp__trans.html#a583de0d8e12e8030cca8ea1d1f7cf867" title="Pointer to whatever context is needed by the transport.">ah_tcp_trans::ctx</a> field will contain a pointer to <em>cln</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TCP transport. If <em>cln</em> is <code>NULL</code>, <code>(ah_tcp_trans_t) { NULL, NULL }</code> will be returned.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Using the returned transport with more than a single TCP connection yields undefined behavior. </dd></dl>

</div>
</div>
<a id="ae29491b17064971066bc6858ccf21ea8" name="ae29491b17064971066bc6858ccf21ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29491b17064971066bc6858ccf21ea8">&#9670;&#160;</a></span>ah_mbedtls_client_get_last_err()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> int ah_mbedtls_client_get_last_err </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets last MbedTLS error code saved by <em>cln</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MbedTLS error code, or <code>MBEDTLS_ERR_ERROR_GENERIC_ERROR</code> if <em>cln</em> is <code>NULL</code>. </dd></dl>

</div>
</div>
<a id="a0e9f20c74bb183e360bbef598b9e89b5" name="a0e9f20c74bb183e360bbef598b9e89b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e9f20c74bb183e360bbef598b9e89b5">&#9670;&#160;</a></span>ah_mbedtls_client_get_ssl_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> mbedtls_ssl_context * ah_mbedtls_client_get_ssl_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets TLS/SSL context associated with <em>cln</em>. </p>
<p ><em>cln</em> becomes associated with a TLS/SSL context when successfully initialized via a call to <a class="el" href="mbedtls_8h.html#a160a749461dad6634ea816c9325ef63f" title="Initializes cln for subsequent use.">ah_mbedtls_client_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to MbedTLS TLS/SSL context, or <code>NULL</code> if <em>cln</em> is <code>NULL</code>. </dd></dl>

</div>
</div>
<a id="ae200349c5888a2a4c9d92d2f95e1078b" name="ae200349c5888a2a4c9d92d2f95e1078b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae200349c5888a2a4c9d92d2f95e1078b">&#9670;&#160;</a></span>ah_mbedtls_client_get_tcp_conn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__conn.html">ah_tcp_conn_t</a> * ah_mbedtls_client_get_tcp_conn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets pointer to TCP connection associated with <em>cln</em>. </p>
<p ><em>cln</em> becomes associated with a connection when it is provided as a TCP transport to an initialized connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to connection. If <em>cln</em> is <code>NULL</code> or has not yet been associated with a client, <code>NULL</code> is returned. </dd></dl>

</div>
</div>
<a id="a160a749461dad6634ea816c9325ef63f" name="a160a749461dad6634ea816c9325ef63f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a160a749461dad6634ea816c9325ef63f">&#9670;&#160;</a></span>ah_mbedtls_client_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_mbedtls_client_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a>&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mbedtls_ssl_config *&#160;</td>
          <td class="paramname"><em>ssl_conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">ah_mbedtls_on_handshake_done_cb</a>&#160;</td>
          <td class="paramname"><em>on_handshake_done_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <em>cln</em> for subsequent use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
    <tr><td class="paramname">trans</td><td>Desired base transport, used to send and receive TLS handshake messages and encrypted data. </td></tr>
    <tr><td class="paramname">ssl_conf</td><td>Pointer to initialized and prepared MbedTLS SSL/TLS configuration. The configuration must be set to <em>client mode</em> by being provided the <code>MBEDTLS_SSL_IS_CLIENT</code> endpoint identifier. </td></tr>
    <tr><td class="paramname">on_handshake_done_cb</td><td>Pointer to function called whenever a TCP handshake is concluded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - Initialization was successful. </li>
<li>
<a class="el" href="err_8h.html#a1600ea0451fe4cb58ca302e8c9c443ae">AH_EDEP</a> - An MbedTLS error occurred that cannot be represented with an Arrowhead Core C error code. Use the <a class="el" href="mbedtls_8h.html#ae29491b17064971066bc6858ccf21ea8" title="Gets last MbedTLS error code saved by cln.">ah_mbedtls_client_get_last_err()</a> function with <em>cln</em> as argument to get a copy of the MbedTLS error. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>cln</em>, <em>ssl_conf</em> or <em>on_handshake_done_cb</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>trans</em> is invalid, as reported by <a class="el" href="tcp_8h.html#a6b113620283c060df4fe657c20abebbf" title="Checks if every field of vtab is set, making it valid for use as part of a TCP transport.">ah_tcp_trans_vtab_is_valid()</a>. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> - Failed to allocate heap memory. </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>You must initialize a separate MbedTLS client for each TCP connection you want to use with and MbedTLS transport.</dd>
<dd>
Every successfully initialized <em>cln</em> must eventually be provided to <a class="el" href="mbedtls_8h.html#ac71b8e3239612a03821e61f3deeff0bb" title="Terminates cln, releasing any resources it may hold.">ah_mbedtls_client_term()</a>. </dd></dl>

</div>
</div>
<a id="ac71b8e3239612a03821e61f3deeff0bb" name="ac71b8e3239612a03821e61f3deeff0bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac71b8e3239612a03821e61f3deeff0bb">&#9670;&#160;</a></span>ah_mbedtls_client_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> void ah_mbedtls_client_term </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__client.html">ah_mbedtls_client_t</a> *&#160;</td>
          <td class="paramname"><em>cln</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates <em>cln</em>, releasing any resources it may hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cln</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef5730ce3b87f5ae145d8c4102ed0f10" name="aef5730ce3b87f5ae145d8c4102ed0f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5730ce3b87f5ae145d8c4102ed0f10">&#9670;&#160;</a></span>ah_mbedtls_lib_version_major()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short ah_mbedtls_lib_version_major </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets major version of this MbedTLS library. </p>
<dl class="section return"><dt>Returns</dt><dd>Major version indicator. </dd></dl>

</div>
</div>
<a id="ad9bb0a936d653d1d916f5b2a7185b0ad" name="ad9bb0a936d653d1d916f5b2a7185b0ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9bb0a936d653d1d916f5b2a7185b0ad">&#9670;&#160;</a></span>ah_mbedtls_lib_version_minor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short ah_mbedtls_lib_version_minor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets minor version of this MbedTLS library. </p>
<dl class="section return"><dt>Returns</dt><dd>Minor version indicator. </dd></dl>

</div>
</div>
<a id="ac010008b65bc89d8df33cc0013c08863" name="ac010008b65bc89d8df33cc0013c08863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac010008b65bc89d8df33cc0013c08863">&#9670;&#160;</a></span>ah_mbedtls_lib_version_patch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> unsigned short ah_mbedtls_lib_version_patch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets patch version of this MbedTLS library. </p>
<dl class="section return"><dt>Returns</dt><dd>Patch version indicator. </dd></dl>

</div>
</div>
<a id="a47b19e66b4019e7bc7ba737b44492726" name="a47b19e66b4019e7bc7ba737b44492726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b19e66b4019e7bc7ba737b44492726">&#9670;&#160;</a></span>ah_mbedtls_lib_version_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> const char * ah_mbedtls_lib_version_str </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets human-readable representation of version of this MbedTLS library. </p>
<dl class="section return"><dt>Returns</dt><dd>Constant string representation of version. </dd></dl>

</div>
</div>
<a id="ac1761bf2d966f1995f6dd5cddc7c69c9" name="ac1761bf2d966f1995f6dd5cddc7c69c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1761bf2d966f1995f6dd5cddc7c69c9">&#9670;&#160;</a></span>ah_mbedtls_server_as_tcp_trans()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a> ah_mbedtls_server_as_tcp_trans </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *&#160;</td>
          <td class="paramname"><em>srv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets copy of TCP transport associated with <em>srv</em>. </p>
<p >The <a class="el" href="structah__tcp__trans.html#a583de0d8e12e8030cca8ea1d1f7cf867" title="Pointer to whatever context is needed by the transport.">ah_tcp_trans::ctx</a> field will contain a pointer to <em>srv</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>Pointer to client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TCP transport. If <em>srv</em> is <code>NULL</code>, <code>(ah_tcp_trans_t) { NULL, NULL }</code> will be returned.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Using the returned transport with more than a single TCP listener yields undefined behavior. </dd></dl>

</div>
</div>
<a id="ab69d6d0ed557dcaf9a6080fc6be44b08" name="ab69d6d0ed557dcaf9a6080fc6be44b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab69d6d0ed557dcaf9a6080fc6be44b08">&#9670;&#160;</a></span>ah_mbedtls_server_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_mbedtls_server_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *&#160;</td>
          <td class="paramname"><em>srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structah__tcp__trans.html">ah_tcp_trans_t</a>&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mbedtls_ssl_config *&#160;</td>
          <td class="paramname"><em>ssl_conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mbedtls_8h.html#a20845064a448d8ac82dc4f5c70f5c048">ah_mbedtls_on_handshake_done_cb</a>&#160;</td>
          <td class="paramname"><em>on_handshake_done_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <em>srv</em> for subsequent use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>Pointer to server. </td></tr>
    <tr><td class="paramname">trans</td><td>Desired base transport, used to send and receive TLS handshake messages and encrypted data. </td></tr>
    <tr><td class="paramname">ssl_conf</td><td>Pointer to initialized and prepared MbedTLS SSL/TLS configuration. The configuration must be set to <em>server mode</em> by being provided the <code>MBEDTLS_SSL_IS_SERVER</code> endpoint identifier. </td></tr>
    <tr><td class="paramname">on_handshake_done_cb</td><td>Pointer to function called whenever a TCP handshake is concluded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - Initialization was successful. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>srv</em>, <em>ssl_conf</em> or <em>on_handshake_done_cb</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>trans</em> is invalid, as reported by <a class="el" href="tcp_8h.html#a6b113620283c060df4fe657c20abebbf" title="Checks if every field of vtab is set, making it valid for use as part of a TCP transport.">ah_tcp_trans_vtab_is_valid()</a>. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> - Failed to allocate heap memory. </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>You must initialize a separate MbedTLS server for each TCP listener you want to use with an MbedTLS transport.</dd>
<dd>
Every successfully initialized <em>srv</em> must eventually be provided to <a class="el" href="mbedtls_8h.html#a607401acb7db41d616d47ed5bf5e24b3" title="Terminates srv, releasing any resources it may hold.">ah_mbedtls_server_term()</a>.</dd>
<dd>
This call will not create any MbedTLS TLS/SSL contexts. Rather, one such will be created for each connection accepted by the TCP listener associated with <em>srv</em>. </dd></dl>

</div>
</div>
<a id="a607401acb7db41d616d47ed5bf5e24b3" name="a607401acb7db41d616d47ed5bf5e24b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607401acb7db41d616d47ed5bf5e24b3">&#9670;&#160;</a></span>ah_mbedtls_server_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> void ah_mbedtls_server_term </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__mbedtls__server.html">ah_mbedtls_server_t</a> *&#160;</td>
          <td class="paramname"><em>srv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates <em>srv</em>, releasing any resources it may hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>Pointer to server. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
  <footer>Generated by <a href="https://doxygen.org">Doxygen</a> 1.9.5</footer>
</body>
</html>
