<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ah_base/include/ah/loop.h File Reference - Eclipse Arrowhead™ Core C Libraries</title>
  <script src="jquery.js"></script>
  <script src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script>
    window.addEventListener("load", () => {
      let contents = document.querySelector("body > div.contents");
      if (!contents) {
        return;
      }
      document.querySelectorAll("#top ul > li.current > a > span").forEach((selectedMenuItem) => {
        contents.classList.add(selectedMenuItem.innerText.trim().toLowerCase().replace(/\s+/, "-"));
      });
      for (let i = contents.childNodes.length - 1; i >= 0; i -= 1) {
        let childNode = contents.childNodes.item(i);
        if ((childNode.nodeType === 3 && childNode.textContent.trim().length === 0)
                || (childNode.nodeType === 1 && childNode.classList.contains("textblock") && childNode.textContent.trim().length === 0)) {
          childNode.remove();
        }
      }
    });
  </script>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="DoxygenStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top">
  <header>
    <img alt="Logo" src="arrowhead-logo-white.svg"/>
    <h1>Eclipse Arrowhead™ Core C Libraries <span class="version"></span></h1>
  </header>
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="files.html"><span>Headers</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e181be20417508ccbaf60a7ad88b28e5.html">ah_base</a></li><li class="navelem"><a class="el" href="dir_4e09807cd623eda32c4b1ef4b2b976fd.html">include</a></li><li class="navelem"><a class="el" href="dir_d9de5a19e148cb2028fab693738defa4.html">ah</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">loop.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Event scheduling. </p>
<p >This file exposes the <em>event loop</em>, which is a data structure used to subscribe to and schedule platform events. Examples of events can be a received network message, a file finished being copied, or a certain task having been executed until completion.</p>
<p >While the API provided here only allows for operations directly on event loops, other features of this library make use of event loops internally in order to handle event scheduling, such as those in <a class="el" href="task_8h.html" title="Task scheduling.">task.h</a>, <a class="el" href="tcp_8h.html" title="Transmission Control Protocol (TCP) utilities.">tcp.h</a> and <a class="el" href="udp_8h.html" title="User Datagram Protocol (UDP) utilities.">udp.h</a>.</p>
<p >The event loop data structure is typically implemented on top of an API that is provided by the platform for which this library is compiled. The following table show what platform APIs are used on the respective platforms supported by this library:</p>
<a class="anchor" id="event-loop-implementations"></a>
<table class="doxtable">
<caption>Event loop implementations</caption>
<tr>
<th>Platform </th><th>API </th></tr>
<tr>
<td>Darwin </td><td><a href="https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/FSEvents_ProgGuide/KernelQueues/KernelQueues.html">Kernel Queues (KQueue)</a> </td></tr>
<tr>
<td>Linux </td><td><a href="https://unixism.net/loti/what_is_io_uring.html">io_uring</a> </td></tr>
<tr>
<td>Win32 </td><td><a href="https://docs.microsoft.com/en-us/windows/win32/fileio/i-o-completion-ports">I/O Completion Ports (IOCP)</a> </td></tr>
</table>
<dl class="section warning"><dt>Warning</dt><dd>Event loops are <em>not</em> thread safe, and, as a consequence, neither are any functions that depend on event loops throughout this library. </dd></dl>
</div>
<p><a href="loop_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structah__loop.html">ah_loop</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event loop.  <a href="structah__loop.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abb2cdce76fdc593f83e1d64eba167861"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#abb2cdce76fdc593f83e1d64eba167861">ah_loop_init</a> (<a class="el" href="structah__loop.html">ah_loop_t</a> *loop, size_t capacity)</td></tr>
<tr class="memdesc:abb2cdce76fdc593f83e1d64eba167861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <em>loop</em> with a certain event <em>capacity</em>.  <a href="loop_8h.html#abb2cdce76fdc593f83e1d64eba167861">More...</a><br /></td></tr>
<tr class="separator:abb2cdce76fdc593f83e1d64eba167861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eedb82a650ebcf2ff441aa1825334ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#a7eedb82a650ebcf2ff441aa1825334ee">ah_loop_is_running</a> (const <a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:a7eedb82a650ebcf2ff441aa1825334ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if <em>loop</em> is currently running.  <a href="loop_8h.html#a7eedb82a650ebcf2ff441aa1825334ee">More...</a><br /></td></tr>
<tr class="separator:a7eedb82a650ebcf2ff441aa1825334ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa694555506200a511902a97c76fe9942"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#aa694555506200a511902a97c76fe9942">ah_loop_is_term</a> (const <a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:aa694555506200a511902a97c76fe9942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if <em>loop</em> is currently being or has been terminated.  <a href="loop_8h.html#aa694555506200a511902a97c76fe9942">More...</a><br /></td></tr>
<tr class="separator:aa694555506200a511902a97c76fe9942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f47d76f4555a4b09d7b4f73cf0a3f3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__time.html">ah_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#a3f47d76f4555a4b09d7b4f73cf0a3f3d">ah_loop_now</a> (const <a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:a3f47d76f4555a4b09d7b4f73cf0a3f3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets current time, as keep track of by <em>loop</em>.  <a href="loop_8h.html#a3f47d76f4555a4b09d7b4f73cf0a3f3d">More...</a><br /></td></tr>
<tr class="separator:a3f47d76f4555a4b09d7b4f73cf0a3f3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0007aad9328ff3a08aba80ac8d22844"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#af0007aad9328ff3a08aba80ac8d22844">ah_loop_run</a> (<a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:af0007aad9328ff3a08aba80ac8d22844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs event <em>loop</em>, making it await and handle event completions.  <a href="loop_8h.html#af0007aad9328ff3a08aba80ac8d22844">More...</a><br /></td></tr>
<tr class="separator:af0007aad9328ff3a08aba80ac8d22844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108fb0781d30e878b4742c53e77eafbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#a108fb0781d30e878b4742c53e77eafbd">ah_loop_run_until</a> (<a class="el" href="structah__loop.html">ah_loop_t</a> *loop, <a class="el" href="structah__time.html">ah_time_t</a> *time)</td></tr>
<tr class="memdesc:a108fb0781d30e878b4742c53e77eafbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs event <em>loop</em> at least until <em>time</em>, making it await and handle event completions for that duration.  <a href="loop_8h.html#a108fb0781d30e878b4742c53e77eafbd">More...</a><br /></td></tr>
<tr class="separator:a108fb0781d30e878b4742c53e77eafbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef54620e93ce4470e4d523817a44c03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03">ah_loop_stop</a> (<a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:a9ef54620e93ce4470e4d523817a44c03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops <em>loop</em>, preventing it from processing any further events.  <a href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03">More...</a><br /></td></tr>
<tr class="separator:a9ef54620e93ce4470e4d523817a44c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c978a37616a38227f5019df244e700"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700">ah_loop_term</a> (<a class="el" href="structah__loop.html">ah_loop_t</a> *loop)</td></tr>
<tr class="memdesc:af3c978a37616a38227f5019df244e700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates <em>loop</em>, cancelling all of its pending events and releases all of its resources.  <a href="loop_8h.html#af3c978a37616a38227f5019df244e700">More...</a><br /></td></tr>
<tr class="separator:af3c978a37616a38227f5019df244e700"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="abb2cdce76fdc593f83e1d64eba167861" name="abb2cdce76fdc593f83e1d64eba167861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2cdce76fdc593f83e1d64eba167861">&#9670;&#160;</a></span>ah_loop_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_loop_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <em>loop</em> with a certain event <em>capacity</em>. </p>
<p >The exact implications of the <em>capacity</em> argument varies with the targeted platform. As a consequence, what value yields optimal performance will vary with the targeted platform. A value of zero, which indicates that a platform default capacity is desired, should be sufficient for most use cases.</p>
<p >The platform default capacities can be configured as described in <a class="el" href="conf_8h.html" title="Library configuration.">conf.h</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
    <tr><td class="paramname">capacity</td><td>Desired event capacity, or <code>0</code> if a default capacity is to be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - <em>loop</em> was successfully initialized. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>loop</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#ab47b4454a3730cbeb535aa4ab06d72eb">AH_EMFILE</a> [Darwin, Linux] - Per-process file descriptor table is full. </li>
<li>
<a class="el" href="err_8h.html#a39393018d6b238bf24dd9856538f9b9b">AH_ENFILE</a> [Darwin, Linux] - Platform file table is full. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> [Darwin, Linux] - Failed to allocate kernel memory for event queue. </li>
<li>
<a class="el" href="err_8h.html#a65a9889d59795edbe23364fd1f8e7752">AH_EOVERFLOW</a> [Linux] - More than 32-bits of heap memory was requested on a 32-bit system. </li>
<li>
<a class="el" href="err_8h.html#a85e0e475099a07b2756586bd8a42b7e7">AH_EPERM</a> [Linux] - Permission denied to set up required kernel resource. </li>
<li>
<a class="el" href="err_8h.html#a0a1f4fd96ed08dda17689bb7a5652a53">AH_EPROCLIM_W</a> [Win32] - Windows task limit reached. </li>
<li>
<a class="el" href="err_8h.html#a073c6e7c529f43a5f448c8d3bad20fa7">AH_ESYSNOTREADY</a> [Win32] - Network subsystem not ready. </li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>No other functions operating on <em>loop</em> are safe to call until after this function has returned successfully, unless something else is stated in their respective documentations. </dd></dl>

</div>
</div>
<a id="a7eedb82a650ebcf2ff441aa1825334ee" name="a7eedb82a650ebcf2ff441aa1825334ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eedb82a650ebcf2ff441aa1825334ee">&#9670;&#160;</a></span>ah_loop_is_running()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> bool ah_loop_is_running </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if <em>loop</em> is currently running. </p>
<p >A loop is running if and only if (1) <a class="el" href="loop_8h.html#af0007aad9328ff3a08aba80ac8d22844" title="Runs event loop, making it await and handle event completions.">ah_loop_run()</a> is currently being invoked with a pointer to that loop as argument, and (2) no call has been made to <a class="el" href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03" title="Stops loop, preventing it from processing any further events.">ah_loop_stop()</a> or <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a> with that loop since <a class="el" href="loop_8h.html#af0007aad9328ff3a08aba80ac8d22844" title="Runs event loop, making it await and handle event completions.">ah_loop_run()</a> was first invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> only if <em>loop</em> is currently running. <code>false</code> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function returns <code>false</code> if <em>loop</em> is <code>NULL</code>. </dd></dl>

</div>
</div>
<a id="aa694555506200a511902a97c76fe9942" name="aa694555506200a511902a97c76fe9942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa694555506200a511902a97c76fe9942">&#9670;&#160;</a></span>ah_loop_is_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> bool ah_loop_is_term </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if <em>loop</em> is currently being or has been terminated. </p>
<p >A loop is being or has been terminated if <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a> has been invoked with a pointer to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> only if <em>loop</em> is currently being or has been terminated. <code>false</code> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function returns <code>true</code> if <em>loop</em> is <code>NULL</code>.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is only safe to use if (1) the memory of <em>loop</em> is zeroed, (2) <em>loop</em> has been initialized using <a class="el" href="loop_8h.html#abb2cdce76fdc593f83e1d64eba167861" title="Initializes loop with a certain event capacity.">ah_loop_init()</a> and is currently in a non-terminated state, or (3) <em>loop</em> has been terminated using <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a>. </dd></dl>

</div>
</div>
<a id="a3f47d76f4555a4b09d7b4f73cf0a3f3d" name="a3f47d76f4555a4b09d7b4f73cf0a3f3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f47d76f4555a4b09d7b4f73cf0a3f3d">&#9670;&#160;</a></span>ah_loop_now()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="structah__time.html">ah_time_t</a> ah_loop_now </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets current time, as keep track of by <em>loop</em>. </p>
<p >This function exists solely as a way of getting a relatively accurate estimate of the current time without having to use <a class="el" href="time_8h.html#a4f25b712cec7298026de5be5ad5997da" title="Gets the current monotonic time, as reported by the platform.">ah_time_now()</a>, which uses a relatively costly system call on some platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time at which <em>loop</em> last updated its internal clock.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function returns <code>(ah_time_t) { 0u }</code> if <em>loop</em> is <code>NULL</code>. </dd></dl>

</div>
</div>
<a id="af0007aad9328ff3a08aba80ac8d22844" name="af0007aad9328ff3a08aba80ac8d22844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0007aad9328ff3a08aba80ac8d22844">&#9670;&#160;</a></span>ah_loop_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_loop_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs event <em>loop</em>, making it await and handle event completions. </p>
<p >If the <em>loop</em> has been given no events to await prior to this function being called, it will block indefinitely. As event loops are not thread safe by design, this leaves no safe way of ever stopping the loop other than by terminating or interrupting the application from another thread or process.</p>
<p >The operation blocks until <a class="el" href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03" title="Stops loop, preventing it from processing any further events.">ah_loop_stop()</a> or <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a> is called with <em>loop</em> as argument, after which the call eventually returns.</p>
<p >Calling this function is equivalent to invoking <a class="el" href="loop_8h.html#a108fb0781d30e878b4742c53e77eafbd" title="Runs event loop at least until time, making it await and handle event completions for that duration.">ah_loop_run_until()</a> with a <code>NULL</code> time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - <em>loop</em> ran until stopped or terminated. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>loop</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aa95f2476779b43aa0fb7b8dce7092e70">AH_ESTATE</a> - <em>loop</em> is already running or has been terminated. </li>
<li>
<a class="el" href="err_8h.html#aa8e5aa080f59eb326981a36bd35c82c1">AH_EACCES</a> [Darwin] - Process lacks permission to register KQueue filter. </li>
<li>
<a class="el" href="err_8h.html#a6db3828bda8e2d3e32728b4ace12bf03">AH_EINTR</a> [Darwin, Linux] - The process was interrupted by a signal. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> [Darwin, Linux] - Failed to submit pending events due to no memory being available to the kernel. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a108fb0781d30e878b4742c53e77eafbd" name="a108fb0781d30e878b4742c53e77eafbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108fb0781d30e878b4742c53e77eafbd">&#9670;&#160;</a></span>ah_loop_run_until()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_loop_run_until </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structah__time.html">ah_time_t</a> *&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs event <em>loop</em> at least until <em>time</em>, making it await and handle event completions for that duration. </p>
<p >If <em>time</em> is <code>NULL</code>, the function will block indefinitely. If no events were registered prior to such a call, no opportunity will be given to call <a class="el" href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03" title="Stops loop, preventing it from processing any further events.">ah_loop_stop()</a> or <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a> from the blocked thread. As event loops are not thread safe by design, this leaves no safe way of ever stopping the loop other than by terminating or interrupting the application from another thread or process.</p>
<p >The operation blocks until some time after (1) <a class="el" href="loop_8h.html#a9ef54620e93ce4470e4d523817a44c03" title="Stops loop, preventing it from processing any further events.">ah_loop_stop()</a> or <a class="el" href="loop_8h.html#af3c978a37616a38227f5019df244e700" title="Terminates loop, cancelling all of its pending events and releases all of its resources.">ah_loop_term()</a> is called with <em>loop</em> as argument, or (2) <em>time</em> is passed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
    <tr><td class="paramname">time</td><td>Point after which <em>loop</em> execution is to stop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - <em>loop</em> ran until <em>time</em> expired, it was stopped or it was terminated. </li>
<li>
<a class="el" href="err_8h.html#a8f0da4abff1f0f31740022d6939fb28d">AH_EDOM</a> - <em>time</em> is too far into the future for it to be representable by the kernel event queue system. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>loop</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aa95f2476779b43aa0fb7b8dce7092e70">AH_ESTATE</a> - <em>loop</em> is already running or has been terminated. </li>
<li>
<a class="el" href="err_8h.html#aa8e5aa080f59eb326981a36bd35c82c1">AH_EACCES</a> [Darwin] - Process lacks permission to register KQueue filter. </li>
<li>
<a class="el" href="err_8h.html#a6db3828bda8e2d3e32728b4ace12bf03">AH_EINTR</a> [Darwin, Linux] - The process was interrupted by a signal. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> [Darwin, Linux] - Failed to submit pending events due to no memory being available to the kernel. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a9ef54620e93ce4470e4d523817a44c03" name="a9ef54620e93ce4470e4d523817a44c03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef54620e93ce4470e4d523817a44c03">&#9670;&#160;</a></span>ah_loop_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_loop_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops <em>loop</em>, preventing it from processing any further events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - <em>loop</em> was stopped. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>loop</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aa95f2476779b43aa0fb7b8dce7092e70">AH_ESTATE</a> - <em>loop</em> is not running. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="af3c978a37616a38227f5019df244e700" name="af3c978a37616a38227f5019df244e700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c978a37616a38227f5019df244e700">&#9670;&#160;</a></span>ah_loop_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_loop_term </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__loop.html">ah_loop_t</a> *&#160;</td>
          <td class="paramname"><em>loop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates <em>loop</em>, cancelling all of its pending events and releases all of its resources. </p>
<p >All pending events of <em>loop</em> will be invoked with <a class="el" href="err_8h.html#a48e584f2f1aa328bd3eee0757611d609">AH_ECANCELED</a> before termination completes.</p>
<p >If this function is called from an event handler while <a class="el" href="loop_8h.html#af0007aad9328ff3a08aba80ac8d22844" title="Runs event loop, making it await and handle event completions.">ah_loop_run()</a> or <a class="el" href="loop_8h.html#a108fb0781d30e878b4742c53e77eafbd" title="Runs event loop at least until time, making it await and handle event completions for that duration.">ah_loop_run_until()</a> is executing on the same <em>loop</em>, termination is scheduled before either of the mentioned functions return. If <em>loop</em> is not currently running, the termination procedure is executed before this function returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loop</td><td>Pointer to event loop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - <em>loop</em> was terminated or is scheduled for termination. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>loop</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aa95f2476779b43aa0fb7b8dce7092e70">AH_ESTATE</a> - <em>loop</em> is already terminating or terminated. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
  <footer>Generated by <a href="https://doxygen.org">Doxygen</a> 1.9.5</footer>
</body>
</html>
