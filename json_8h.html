<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ah_json/include/ah/json.h File Reference - Eclipse Arrowhead™ Core C Libraries</title>
  <script src="jquery.js"></script>
  <script src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script>
    window.addEventListener("load", () => {
      let contents = document.querySelector("body > div.contents");
      if (!contents) {
        return;
      }
      document.querySelectorAll("#top ul > li.current > a > span").forEach((selectedMenuItem) => {
        contents.classList.add(selectedMenuItem.innerText.trim().toLowerCase().replace(/\s+/, "-"));
      });
      for (let i = contents.childNodes.length - 1; i >= 0; i -= 1) {
        let childNode = contents.childNodes.item(i);
        if ((childNode.nodeType === 3 && childNode.textContent.trim().length === 0)
                || (childNode.nodeType === 1 && childNode.classList.contains("textblock") && childNode.textContent.trim().length === 0)) {
          childNode.remove();
        }
      }
    });
  </script>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="DoxygenStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top">
  <header>
    <img alt="Logo" src="arrowhead-logo-white.svg"/>
    <h1>Eclipse Arrowhead™ Core C Libraries <span class="version"></span></h1>
  </header>
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="files.html"><span>Headers</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2eaf28f291702adf24a283b7faf71083.html">ah_json</a></li><li class="navelem"><a class="el" href="dir_e08bfabd638c908d123beb34e4f84e3d.html">include</a></li><li class="navelem"><a class="el" href="dir_274f21224a16eca8bb31eced7e1c3236.html">ah</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">json.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >JavaScript Object Notation (JSON) utilities. </p>
<p >As a data interchange format, JSON is mainly dealt with directly in two cases: (1) when constructing JSON representations and (2) when interpreting JSON representations. Here, we primarily provide utilities for interpreting JSON. That being said, we do describe how to accomplish both construction and interpretation using only this and the C99 standard library here.</p>
<h3>JSON Construction</h3>
<p >To construct JSON objects, you must produce code that take whatever data structures or values you need to encode and writes them as JSON to a buffer.</p>
<p >To help you, this library most significantly provides the <a class="el" href="json_8h.html#a4ea19991f7a0ffd9bf4b089ee1892236" title="Substitutes any UTF-8 code point below 32, &quot; and \ with its corresponding JSON escape sequence and wr...">ah_json_str_escape()</a> function, which takes an arbitrary C string produces a copy with any characters that are not allowed to occur in a JSON string replaced by their JSON escape sequences. The C99 standard library provides the printf() family of functions, which are able to produce JSON-compliant numbers from C variables. However, the current locale, configurable via the C99 setlocale() function, must use the dot character (<code>.</code>) as <em>radix character</em>, or numbers with fractions will be represented incorrectly. The default C locale does use this radix character, which means that you only need to consider it if you ever change the locale.</p>
<p >An example of a JSON representation being constructed is available at <a class="el" href="ah_json_2examples_2construct_object_8c-example.html">ah_json/examples/construct_object.c</a>.</p>
<h3>JSON Interpretation</h3>
<p >Just as in the case of constructing JSON values, interpreting them requires you to provide code for each value you want to handle. A major difference, however, is that this library helps you with this interpretation by dividing up the JSON data into <em>value tokens</em>, each represented by an instance of <a class="el" href="structah__json__val.html" title="JSON value, concretely represented as a token.">ah_json_val</a>. This division into tokens, or <em>tokenization</em>, is accomplished using the <a class="el" href="json_8h.html#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1" title="Parses src into an array of ah_json_val instances stored in dst.">ah_json_parse()</a> function. While the parsing function does guarantee that a successfully parsed JSON text is ECMA-404 conformant, it does not automatically escape JSON escape sequences in the string tokens in the output, if any. To help with this, we provide functions for escaping and comparing JSON strings, <a class="el" href="json_8h.html#a31850704658f25d3879e7674aa95d6c2" title="Substitutes any JSON escape sequences in src with their UTF-8 equivalents and writes the result to ds...">ah_json_str_unescape()</a> and <a class="el" href="json_8h.html#aa4ec74c4bcb886668e060b972eb90880" title="Compares strings a and b while taking JSON escape sequences into account.">ah_json_str_compare()</a>. Another limitation of this library is that it does not automatically parse JSON numbers. You may do that with C99 standard library functions, such as strtoul() and strtod(). When using strtod() and strtof(), the same caveat applies regarding the locale radix character having to be the dot character as when constructing JSON using the printf() family of function.</p>
<p >An example of a JSON representation being interpreted is available at <a class="el" href="ah_json_2examples_2interpret_object_8c-example.html">ah_json/examples/interpret_object.c</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">https://www.ecma-international.org/publications-and-standards/standards/ecma-404/</a> </dd></dl>
</div>
<p><a href="json_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structah__json__buf.html">ah_json_buf</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">JSON token buffer.  <a href="structah__json__buf.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structah__json__val.html">ah_json_val</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">JSON value, concretely represented as a token.  <a href="structah__json__val.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6c1d7ad7cb1437ff75b7acbffdab755f"><td class="memItemLeft" align="right" valign="top"><a id="a6c1d7ad7cb1437ff75b7acbffdab755f" name="a6c1d7ad7cb1437ff75b7acbffdab755f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_LENGTH_MAX</b></td></tr>
<tr class="memdesc:a6c1d7ad7cb1437ff75b7acbffdab755f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum size, in bytes, of individual JSON tokens produced by <a class="el" href="json_8h.html#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1" title="Parses src into an array of ah_json_val instances stored in dst.">ah_json_parse()</a>. <br /></td></tr>
<tr class="separator:a6c1d7ad7cb1437ff75b7acbffdab755f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa919b2beff36c10720f52b889fd336b1"><td class="memItemLeft" align="right" valign="top"><a id="aa919b2beff36c10720f52b889fd336b1" name="aa919b2beff36c10720f52b889fd336b1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_LEVEL_MAX</b></td></tr>
<tr class="memdesc:aa919b2beff36c10720f52b889fd336b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum tree depth supported for input strings parsed by <a class="el" href="json_8h.html#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1" title="Parses src into an array of ah_json_val instances stored in dst.">ah_json_parse()</a>. <br /></td></tr>
<tr class="separator:aa919b2beff36c10720f52b889fd336b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7657ccc62fbc24b23796fc7b1ac684d5"><td class="memItemLeft" align="right" valign="top"><a id="a7657ccc62fbc24b23796fc7b1ac684d5" name="a7657ccc62fbc24b23796fc7b1ac684d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_VERSION_MAJOR</b>&#160;&#160;&#160;AH_I_JSON_VERSION_MAJOR</td></tr>
<tr class="memdesc:a7657ccc62fbc24b23796fc7b1ac684d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Major version of the JSON library, represented by an unsigned integer literal. <br /></td></tr>
<tr class="separator:a7657ccc62fbc24b23796fc7b1ac684d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afbea07764215643a029bb08dd5215d"><td class="memItemLeft" align="right" valign="top"><a id="a6afbea07764215643a029bb08dd5215d" name="a6afbea07764215643a029bb08dd5215d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_VERSION_MINOR</b>&#160;&#160;&#160;AH_I_JSON_VERSION_MINOR</td></tr>
<tr class="memdesc:a6afbea07764215643a029bb08dd5215d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minor version of the JSON library, represented by an unsigned integer literal. <br /></td></tr>
<tr class="separator:a6afbea07764215643a029bb08dd5215d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225ef22c233bc54c4ca4b2b5bdccf7d5"><td class="memItemLeft" align="right" valign="top"><a id="a225ef22c233bc54c4ca4b2b5bdccf7d5" name="a225ef22c233bc54c4ca4b2b5bdccf7d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_VERSION_PATCH</b>&#160;&#160;&#160;AH_I_JSON_VERSION_PATCH</td></tr>
<tr class="memdesc:a225ef22c233bc54c4ca4b2b5bdccf7d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Patch version of the JSON library, represented by an unsigned integer literal. <br /></td></tr>
<tr class="separator:a225ef22c233bc54c4ca4b2b5bdccf7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a556eca01a8a79b0d7ac0ce76ab3c62"><td class="memItemLeft" align="right" valign="top"><a id="a2a556eca01a8a79b0d7ac0ce76ab3c62" name="a2a556eca01a8a79b0d7ac0ce76ab3c62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_VERSION_STR</b>&#160;&#160;&#160;AH_I_JSON_VERSION_STR</td></tr>
<tr class="memdesc:a2a556eca01a8a79b0d7ac0ce76ab3c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant string representation of the JSON library version. <br /></td></tr>
<tr class="separator:a2a556eca01a8a79b0d7ac0ce76ab3c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">JSON Value Types</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >Used to indicate the concrete types of <a class="el" href="structah__json__val.html" title="JSON value, concretely represented as a token.">ah_json_val</a> instances. </p>
</div></td></tr>
<tr class="memitem:a56b4051984b21cd12145f3efa9a94ffd"><td class="memItemLeft" align="right" valign="top"><a id="a56b4051984b21cd12145f3efa9a94ffd" name="a56b4051984b21cd12145f3efa9a94ffd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_ARRAY</b>&#160;&#160;&#160;2u</td></tr>
<tr class="separator:a56b4051984b21cd12145f3efa9a94ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76b8f4cf2175811acb1a9f56f12d9e9"><td class="memItemLeft" align="right" valign="top"><a id="ac76b8f4cf2175811acb1a9f56f12d9e9" name="ac76b8f4cf2175811acb1a9f56f12d9e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_ERROR</b>&#160;&#160;&#160;0u</td></tr>
<tr class="memdesc:ac76b8f4cf2175811acb1a9f56f12d9e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unexpected input character. <br /></td></tr>
<tr class="separator:ac76b8f4cf2175811acb1a9f56f12d9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cacdd0577e4e1d44833f1c74fd9945f"><td class="memItemLeft" align="right" valign="top"><a id="a8cacdd0577e4e1d44833f1c74fd9945f" name="a8cacdd0577e4e1d44833f1c74fd9945f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_FALSE</b>&#160;&#160;&#160;6u</td></tr>
<tr class="separator:a8cacdd0577e4e1d44833f1c74fd9945f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121e1947ea72048a230de28f0facdd96"><td class="memItemLeft" align="right" valign="top"><a id="a121e1947ea72048a230de28f0facdd96" name="a121e1947ea72048a230de28f0facdd96"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_NULL</b>&#160;&#160;&#160;7u</td></tr>
<tr class="separator:a121e1947ea72048a230de28f0facdd96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381f8064ee89b35a0404c4653440ce38"><td class="memItemLeft" align="right" valign="top"><a id="a381f8064ee89b35a0404c4653440ce38" name="a381f8064ee89b35a0404c4653440ce38"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_NUMBER</b>&#160;&#160;&#160;4u</td></tr>
<tr class="separator:a381f8064ee89b35a0404c4653440ce38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d3cbedad4d973a1c121a01b29b0dd5"><td class="memItemLeft" align="right" valign="top"><a id="a20d3cbedad4d973a1c121a01b29b0dd5" name="a20d3cbedad4d973a1c121a01b29b0dd5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_OBJECT</b>&#160;&#160;&#160;1u</td></tr>
<tr class="separator:a20d3cbedad4d973a1c121a01b29b0dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af72b8e41abeb5ab5f08a12adba94b873"><td class="memItemLeft" align="right" valign="top"><a id="af72b8e41abeb5ab5f08a12adba94b873" name="af72b8e41abeb5ab5f08a12adba94b873"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_STRING</b>&#160;&#160;&#160;3u</td></tr>
<tr class="separator:af72b8e41abeb5ab5f08a12adba94b873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1630214bd9519f25e8f41696c9d91a"><td class="memItemLeft" align="right" valign="top"><a id="a8a1630214bd9519f25e8f41696c9d91a" name="a8a1630214bd9519f25e8f41696c9d91a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AH_JSON_TYPE_TRUE</b>&#160;&#160;&#160;5u</td></tr>
<tr class="separator:a8a1630214bd9519f25e8f41696c9d91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a94c4b0c0090cf934c790bf49bfecca30"><td class="memItemLeft" align="right" valign="top"><a id="a94c4b0c0090cf934c790bf49bfecca30" name="a94c4b0c0090cf934c790bf49bfecca30"></a>
typedef struct <a class="el" href="structah__json__buf.html">ah_json_buf</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ah_json_buf_t</b></td></tr>
<tr class="separator:a94c4b0c0090cf934c790bf49bfecca30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09a3006130d94567658053dca5abb59"><td class="memItemLeft" align="right" valign="top"><a id="ac09a3006130d94567658053dca5abb59" name="ac09a3006130d94567658053dca5abb59"></a>
typedef struct <a class="el" href="structah__json__val.html">ah_json_val</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ah_json_val_t</b></td></tr>
<tr class="separator:ac09a3006130d94567658053dca5abb59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">JSON Construction Functions</div></td></tr>
<tr class="memitem:a4ea19991f7a0ffd9bf4b089ee1892236"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a4ea19991f7a0ffd9bf4b089ee1892236">ah_json_str_escape</a> (const char *src, size_t src_length, char *dst, size_t *dst_length)</td></tr>
<tr class="memdesc:a4ea19991f7a0ffd9bf4b089ee1892236"><td class="mdescLeft">&#160;</td><td class="mdescRight">Substitutes any UTF-8 code point below 32, <code>"</code> and <code>\</code> with its corresponding JSON escape sequence and writes the result to <em>dst</em>.  <a href="json_8h.html#a4ea19991f7a0ffd9bf4b089ee1892236">More...</a><br /></td></tr>
<tr class="separator:a4ea19991f7a0ffd9bf4b089ee1892236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">JSON Interpretation Functions</div></td></tr>
<tr class="memitem:a11bc3dc5cd71f2c9fc9faeb1f53fd7a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1">ah_json_parse</a> (<a class="el" href="structah__buf.html">ah_buf_t</a> src, <a class="el" href="structah__json__buf.html">ah_json_buf_t</a> *dst)</td></tr>
<tr class="memdesc:a11bc3dc5cd71f2c9fc9faeb1f53fd7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses <em>src</em> into an array of <a class="el" href="structah__json__val.html" title="JSON value, concretely represented as a token.">ah_json_val</a> instances stored in <em>dst</em>.  <a href="json_8h.html#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1">More...</a><br /></td></tr>
<tr class="separator:a11bc3dc5cd71f2c9fc9faeb1f53fd7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ec74c4bcb886668e060b972eb90880"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#aa4ec74c4bcb886668e060b972eb90880">ah_json_str_compare</a> (const char *a, size_t a_length, const char *b, size_t b_length)</td></tr>
<tr class="memdesc:aa4ec74c4bcb886668e060b972eb90880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares strings <em>a</em> and <em>b</em> while taking JSON escape sequences into account.  <a href="json_8h.html#aa4ec74c4bcb886668e060b972eb90880">More...</a><br /></td></tr>
<tr class="separator:aa4ec74c4bcb886668e060b972eb90880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31850704658f25d3879e7674aa95d6c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a31850704658f25d3879e7674aa95d6c2">ah_json_str_unescape</a> (const char *src, size_t src_length, char *dst, size_t *dst_length)</td></tr>
<tr class="memdesc:a31850704658f25d3879e7674aa95d6c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Substitutes any JSON escape sequences in <em>src</em> with their UTF-8 equivalents and writes the result to <em>dst</em>.  <a href="json_8h.html#a31850704658f25d3879e7674aa95d6c2">More...</a><br /></td></tr>
<tr class="separator:a31850704658f25d3879e7674aa95d6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11bc3dc5cd71f2c9fc9faeb1f53fd7a1" name="a11bc3dc5cd71f2c9fc9faeb1f53fd7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11bc3dc5cd71f2c9fc9faeb1f53fd7a1">&#9670;&#160;</a></span>ah_json_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_json_parse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structah__buf.html">ah_buf_t</a>&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structah__json__buf.html">ah_json_buf_t</a> *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses <em>src</em> into an array of <a class="el" href="structah__json__val.html" title="JSON value, concretely represented as a token.">ah_json_val</a> instances stored in <em>dst</em>. </p>
<p >This function operates either with or without dynamic memory reallocation using the C99 realloc() function. To enable the former, make sure that the <a class="el" href="structah__json__buf.html#a6bc0aa34b1cf971d3e5a35301dbdea90" title="Pointer to the base of an array of JSON values.">ah_json_buf::values</a> field of <em>dst</em> is set to <code>NULL</code> and that <a class="el" href="structah__json__buf.html#a525f7378174e73eee11332b798c97ab2" title="The current number of values in values.">ah_json_buf::length</a> is set to <code>0</code>. The <a class="el" href="structah__json__buf.html#af2d57c1bc360e4254bc1b70af2d3afde" title="The maximum number values that can currently be stored in values.">ah_json_buf::capacity</a> field determines the initially allocated capacity when dynamic allocation is enabled.</p>
<p >To make this function operate without dynamic memory allocation, make the <a class="el" href="structah__json__buf.html#a6bc0aa34b1cf971d3e5a35301dbdea90" title="Pointer to the base of an array of JSON values.">ah_json_buf::values</a> field of <em>dst</em> point to an array you allocated. Its capacity must be indicated by <a class="el" href="structah__json__buf.html#af2d57c1bc360e4254bc1b70af2d3afde" title="The maximum number values that can currently be stored in values.">ah_json_buf::capacity</a> and <a class="el" href="structah__json__buf.html#a525f7378174e73eee11332b798c97ab2" title="The current number of values in values.">ah_json_buf::length</a> should be set to <code>0</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Pointer to initialized input buffer. </td></tr>
    <tr><td class="paramname">dst</td><td>Pointer to initialized output buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - The operation was successful. </li>
<li>
<a class="el" href="err_8h.html#a207acd4fd403e3bf0efdfee90a13f7ae">AH_EEOF</a> - <em>src</em> ended unexpectedly. </li>
<li>
<a class="el" href="err_8h.html#a7cf5011c680a591df888f256f0881dbd">AH_ESYNTAX</a> - <em>src</em> either contains an invalid UTF-8 sequence or invalid JSON. The former error can be distinguished from the latter by <em>dst</em> containing a non-zero <a class="el" href="structah__json__buf.html#a525f7378174e73eee11332b798c97ab2" title="The current number of values in values.">ah_json_buf::length</a> only if the JSON is invalid. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>src</em> is invalid, <em>dst</em> is <code>NULL</code> or <code>dst-&gt;length</code> is larger than <code>dst-&gt;capacity</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <code>dst-&gt;values</code> is <code>NULL</code>, which enables dynamic reallocation, and <code>dst-&gt;length</code> is not <code>0</code>. </li>
<li>
<a class="el" href="err_8h.html#a65a9889d59795edbe23364fd1f8e7752">AH_EOVERFLOW</a> - <em>src</em> exceeded <a class="el" href="json_8h.html#aa919b2beff36c10720f52b889fd336b1">AH_JSON_LEVEL_MAX</a> or <a class="el" href="json_8h.html#a6c1d7ad7cb1437ff75b7acbffdab755f">AH_JSON_LENGTH_MAX</a>. </li>
<li>
<a class="el" href="err_8h.html#aae90908ac56245681663381edb2eda2a">AH_ENOBUFS</a> - <em>dst</em> is out of empty values and dynamic reallocation is disabled. </li>
<li>
<a class="el" href="err_8h.html#a93152c7ed33b050e5269c18301108a94">AH_ENOMEM</a> - <em>dst</em> is out of empty values and dynamic reallocation failed. </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>When this function returns, <em>dst</em> will be in a valid state unless the returned error code is <a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a>, in which case <em>dst</em> remains unmodified. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="ah_json_2examples_2interpret_object_8c-example.html#a3">ah_json/examples/interpret_object.c</a>.</dd>
</dl>

</div>
</div>
<a id="aa4ec74c4bcb886668e060b972eb90880" name="aa4ec74c4bcb886668e060b972eb90880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ec74c4bcb886668e060b972eb90880">&#9670;&#160;</a></span>ah_json_str_compare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> int ah_json_str_compare </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>a_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>b_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares strings <em>a</em> and <em>b</em> while taking JSON escape sequences into account. </p>
<p >If, for example, this function is provided the two strings <code>"I'm a 猫"</code> and <code>"I'm a \u732B"</code>, it will correctly report them as being equal, despite the Chinese sign for "cat" being given as an escape sequence in the second string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Pointer to first string. </td></tr>
    <tr><td class="paramname">a_length</td><td>Length of <em>a</em>, excluding any NULL-terminator. </td></tr>
    <tr><td class="paramname">b</td><td>Pointer to second string. </td></tr>
    <tr><td class="paramname">b_length</td><td>Length of <em>b</em>, excluding any NULL-terminator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer greater than, equal to, or less than <code>0</code>, depending on whether <em>a</em> is greater than, equal to, or less than <em>b</em>.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function treats the individual bytes of <em>a</em> and <em>b</em> as unsigned 8-bit bytes when performing the comparison.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If <em>a</em> is <code>NULL</code> and <em>a_length</em> is not <code>0</code>, or if <em>b</em> is <code>NULL</code> and <em>b_length</em> is not <code>0</code>, this function returns <code>-1</code>. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="ah_json_2examples_2interpret_object_8c-example.html#a11">ah_json/examples/interpret_object.c</a>.</dd>
</dl>

</div>
</div>
<a id="a4ea19991f7a0ffd9bf4b089ee1892236" name="a4ea19991f7a0ffd9bf4b089ee1892236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea19991f7a0ffd9bf4b089ee1892236">&#9670;&#160;</a></span>ah_json_str_escape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_json_str_escape </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>src_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>dst_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Substitutes any UTF-8 code point below 32, <code>"</code> and <code>\</code> with its corresponding JSON escape sequence and writes the result to <em>dst</em>. </p>
<p >The resulting string is safe to use as the characters of a JSON string. It will not be enclosed in double quotes (<code>"</code>), however.</p>
<p >If the operation is successful, the value pointed at by <em>dst_length</em> is updated to reflect the final length of the string actually written to <em>dst</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Pointer to input buffer. </td></tr>
    <tr><td class="paramname">src_length</td><td>Length of <em>src</em>, excluding any NULL-terminator. </td></tr>
    <tr><td class="paramname">dst</td><td>Pointer to output buffer. </td></tr>
    <tr><td class="paramname">dst_length</td><td>Pointer to length of <em>dst</em>, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - The operation was successful. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>src</em> is <code>NULL</code> and <em>src_length</em> is not <code>0</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>dst_length</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>dst</em> is <code>NULL</code> and the value pointed at by <em>dst_length</em> is not <code>0</code>. </li>
<li>
<a class="el" href="err_8h.html#a65a9889d59795edbe23364fd1f8e7752">AH_EOVERFLOW</a> - <em>dst</em> not large enough to hold the escaped string. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a31850704658f25d3879e7674aa95d6c2" name="a31850704658f25d3879e7674aa95d6c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31850704658f25d3879e7674aa95d6c2">&#9670;&#160;</a></span>ah_json_str_unescape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defs_8h.html#a4a00eaa653b79c27bff40d48d658f86f">ah_extern</a> <a class="el" href="defs_8h.html#a746483e29fbbad8cb71e1b3875763ae2">ah_err_t</a> ah_json_str_unescape </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>src_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>dst_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Substitutes any JSON escape sequences in <em>src</em> with their UTF-8 equivalents and writes the result to <em>dst</em>. </p>
<p >If the operation is successful, the value pointed at by <em>dst_length</em> is updated to reflect the final length of the string actually written to <em>dst</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Pointer to input buffer. </td></tr>
    <tr><td class="paramname">src_length</td><td>Length of <em>src</em>, excluding any NULL-terminator. </td></tr>
    <tr><td class="paramname">dst</td><td>Pointer to output buffer. </td></tr>
    <tr><td class="paramname">dst_length</td><td>Pointer to length of <em>dst</em>, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following error codes: <ul>
<li>
<a class="el" href="err_8h.html#af1346324d9368d43e1e103d395368306">AH_ENONE</a> - The operation was successful. </li>
<li>
<a class="el" href="err_8h.html#a7cf5011c680a591df888f256f0881dbd">AH_ESYNTAX</a> - <em>src</em> contains an illegal UTF-8 sequence or an invalid JSON escape. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>src</em> is <code>NULL</code> and <em>src_length</em> is not <code>0</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>dst_length</em> is <code>NULL</code>. </li>
<li>
<a class="el" href="err_8h.html#aadafdf4cd97c6a55df7d8b3eb5a9ab05">AH_EINVAL</a> - <em>dst</em> is <code>NULL</code> and the value pointed at by <em>dst_length</em> is not <code>0</code>. </li>
<li>
<a class="el" href="err_8h.html#a65a9889d59795edbe23364fd1f8e7752">AH_EOVERFLOW</a> - <em>dst</em> not large enough to hold the unescaped string. </li>
</ul>
</dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="ah_json_2examples_2interpret_object_8c-example.html#a15">ah_json/examples/interpret_object.c</a>.</dd>
</dl>

</div>
</div>
</div><!-- contents -->
  <footer>Generated by <a href="https://doxygen.org">Doxygen</a> 1.9.5</footer>
</body>
</html>
